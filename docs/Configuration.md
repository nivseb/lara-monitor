Configuration
=============

|                        Key                         |             ENV              |            Default            | Description                                                                                                                                                                                                                                                                                                           |
|:--------------------------------------------------:|:----------------------------:|:-----------------------------:|:----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|               `lara-monitor.enabled`               |    `LARA_MONITOR_ENABLED`    |            `false`            | Enables lara-monitor as apm agent.                                                                                                                                                                                                                                                                                    |
|             `lara-monitor.sampleRate`              |                              |             `1.0`             | Sample rate that is used for monitoring. The `1.0` corresponds to 100% (everything is sampled).                                                                                                                                                                                                                       |
|         `lara-monitor.ignoreExternalTrace`         |                              |            `false`            | Enables ignoring external `traceparent` header of incoming requests.                                                                                                                                                                                                                                                  |
|             `lara-monitor.service.id`              |                              | md5 from App-Name and App-Env | Id that is used by the apm server to allocate transactions to the same service.                                                                                                                                                                                                                                       |
|            `lara-monitor.service.name`             |          `APP_NAME`          |           `Laravel`           | Name for the service that is displayed in kibana as service name.                                                                                                                                                                                                                                                     |
|             `lara-monitor.service.env`             |          `APP_ENV`           |         `production`          | Environment that is send to the apm server and shown in kibana as environment.                                                                                                                                                                                                                                        |
|           `lara-monitor.service.version`           |        `APP_VERSION`         |            `null`             | Service version that is send to apm server.                                                                                                                                                                                                                                                                           |
|          `lara-monitor.service.agentName`          |                              |        `lara-monitor`         | Agent name used to send to apm server.                                                                                                                                                                                                                                                                                |
|          `lara-monitor.instance.hostname`          |                              |            `null`             | Hostname that is send to apm server. Only set this if its not a container and container id is null.                                                                                                                                                                                                                   |
|        `lara-monitor.instance.containerId`         |        `CONTAINER_ID`        |            `null`             | Container id that is send to apm server. Only set without hostname.                                                                                                                                                                                                                                                   |
|      `lara-monitor.feature.database.enabled`       |  `LARA_MONITOR_DB_ENABLED`   |            `true`             | Enables monitoring of database queries.                                                                                                                                                                                                                                                                               |
|        `lara-monitor.feature.http.enabled`         | `LARA_MONITOR_HTTP_ENABLED`  |            `true`             | Enables monitoring of outgoing http requests.                                                                                                                                                                                                                                                                         |
| `lara-monitor.feature.http.traceParent.middleware` |                              |            `true`             | Enables adding `traceparent` header to outgoing requests. This works for requests via Http-Facade only. For your own guzzle client instances add the `CollectingMiddleware` to the handler stack.                                                                                                                     |
|   `lara-monitor.feature.http.collecting.events`    |                              |            `true`             | Enables monitoring outgoing http requests via Events. `lara-monitor.feature.http.enabled` has to be enabled. Do not enable if `lara-monitor.feature.http.collecting.middleware` is enabled.                                                                                                                           |
| `lara-monitor.feature.http.collecting.middleware`  |                              |            `false`            | Enables monitoring outgoing http requests via Global Middleware. `lara-monitor.feature.http.enabled` has to be enabled. Do not enable if `lara-monitor.feature.http.collecting.events` is enabled. This works only for requests via Http-Facade. For your own guzzle client instances add the `CollectingMiddleware`. |
|        `lara-monitor.feature.redis.enabled`        | `LARA_MONITOR_REDIS_ENABLED` |            `false`            | Enables monitoring of redis calls. Also enable redis events via `Redis::enableEvents()`.                                                                                                                                                                                                                              |
|        `lara-monitor.feature.auth.enabled`         | `LARA_MONITOR_AUTH_ENABLED`  |            `true`             | Enables monitoring of auth instances. User information are added to the trace data.                                                                                                                                                                                                                                   |
|         `lara-monitor.elasticApm.enabled`          |      `ELASTIC_APM_URL`       |              ``               | Enables sending to elastic apm server. Only need to set Url.                                                                                                                                                                                                                                                          |
|         `lara-monitor.elasticApm.baseUrl`          |      `ELASTIC_APM_URL`       |              ``               | Url for elastic apm server (e.g. `https://your-apm-server:8200/`).                                                                                                                                                                                                                                                    |
|          `lara-monitor.elasticApm.meta.*`          |                              |                               | Additional meta information for elastic apm server. For more information see <https://www.elastic.co/guide/en/apm/guide/current/data-model-metadata.html>.                                                                                                                                                            |
